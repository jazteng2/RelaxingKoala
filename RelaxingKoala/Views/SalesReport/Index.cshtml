@model RelaxingKoala.Models.ViewModels.SalesReportViewModel
@using RelaxingKoala.Models;
@{
    ViewData["Title"] = "Find Sales For Menu Item";
}

<h2>@ViewData["Title"]</h2>

<h1>Choose what menu item to display</h1>
<form asp-action="Index" asp-controller="SalesReport" method="get">
    <div class="form-group">
        <label asp-for="@Model.MenuItem.Id">Item ID</label>
        <input asp-for="@Model.MenuItem.Id" type="number" class="form-control" required />
    </div>
    <div class="form-group">
        <label asp-for="@Model.StartDate">Start Date</label>
        <input asp-for="@Model.StartDate" type="date" class="form-control" required />
    </div>
    <div class="form-group">
        <label asp-for="@Model.EndDate">End Date</label>
        <input asp-for="@Model.EndDate" type="date" class="form-control" required />
    </div>
    <button type="submit" class="btn btn-primary">Submit</button>
</form>
<br />
@if (Model.MenuItem != null)
{
    @if (Model.Invoices.Count() == 0)
    {
        <h1>Sorry there isn't anything to display</h1>
    }
    else
    {
        <h1>You have sold <strong>@Model.NumberOfSelection</strong> of <strong>@Model.MenuItem.Name</strong></h1>
        <h1>You're sales total for that item adds up to <strong>$@Model.TotalSalesCost</strong></h1>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>No.</th>
                    <th>Total Pay</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var i in Model.Invoices.Select((value, index) => new { Index = index, value = value }))
                {
                    Invoice invoice = i.value;
                    <tr>
                        <td>@i.Index</td>
                        <td>@invoice.TotalPay</td>
                    </tr>
                }
            </tbody>
        </table>
    }
}
else
{
    <h1>Sorry something went wrong</h1>
}


