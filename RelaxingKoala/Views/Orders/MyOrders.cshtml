@model IEnumerable<RelaxingKoala.Models.Orders.IOrder>
@using RelaxingKoala.Models.Orders
@{
    ViewData["Title"] = "My Orders";
}

<h2>My Orders</h2>

<table class="table">
    <thead>
        <tr>
            <th>Order ID</th>
            <th>Cost</th>
            <th>Order State</th>
            <th>Order Type</th>
            <th>Menu Items</th>
            <th>Tables</th>
            <th>Pay</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var order in Model)
        {
            <tr>
                <td>@order.Id</td>
                <td>@order.Cost</td>
                <td>@order.State</td>
                <td>@order.Type</td>
                <td>@string.Join(", ", order.MenuItems.Select(mi => mi.Name))</td>
                <td>
                    @if (order is RelaxingKoala.Models.Orders.DineInOrder dineInOrder)
                    {
                        @string.Join(", ", dineInOrder.Tables.Select(t => "Table " + t.Number))
                    }
                </td>
                <td>
                    @if (order.State == OrderState.Onhold)
                    {
                        <a asp-controller="Orders" asp-action="PayOrder" asp-route-orderId="@order.Id" class="btn btn-primary">Pay</a>
                    }
                </td>
            </tr>
        }
    </tbody>
</table>

<a asp-action="Create" class="btn btn-primary">Create New Order</a>
